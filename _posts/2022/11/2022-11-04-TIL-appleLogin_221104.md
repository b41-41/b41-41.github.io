---
layout: post
title: "웹에서 Apple 로그인 흐름 (백엔드와 함께)"
categories: TIL OAuth SocialLogin
---

# 들어가기

- 이전에도 애플 로그인을 구현할 때 세팅하는 부분 때문에 애를 먹었지만, 이번에 다시 애플 로그인을 구현하면서 문제가 발생
- 문제는 기존 애플 로그인에서 사용하던 서비스 아이디 세팅 그대로 기존과 다른 서버의 API에 애플 로그인 결과 토큰을 보냈더니 에러 발생.
- 그 서버에서 사용하는 애플 로그인 세팅으로 바꾼 후 URI, Redirect URL 정보를 추가한 후 해결.
- 해결하면서 로그인 흐름에 대해서 다시 정리해 봄.

## Apple 로그인 흐름

- 백엔드와 함께하는 Apple 로그인 흐름
    - 클라이언트 (사이트)
    - 애플 로그인 요청
        - 미리 애플 개발자 사이트에서 설정해 놓은 값으로 요청
        - URI입력과 redirect URL입력 부분이 있는데, URI부분에는 `[https://`(프로토콜)부분](https://부분) 빼고 작성 redirect URL은 실제 Redirect되는 주소 작성
            - 작성 내용이 상이할 시 로그인 창에서 에러 메시지를 띄우게 됨
    - 로그인 후 token 반환
    - token을 백엔드 서버 API에 전달
        - 백엔드 서버에서 token 유효성 검증
    - 백엔드 서버에서 받은 token으로 로그인 처리
